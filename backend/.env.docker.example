# ============================================================================
# ePACK Backend - Docker Environment Configuration
# Copy this file to .env.docker and customize as needed
# ============================================================================

# ============================================================================
# DOCKER MODE FLAG (CRITICAL - Must be set to 'true' in Docker)
# ============================================================================
EPACK_IN_DOCKER=true

# ============================================================================
# STORAGE PATHS (Docker container paths)
# ============================================================================
# Input directory for video files
EPACK_INPUT_DIR=/app/resources/input

# Output directory for processed clips
EPACK_OUTPUT_DIR=/app/resources/output

# Flask Session Storage (writable directory required)
EPACK_SESSION_DIR=/app/var/flask_session

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Database file path (mounted volume recommended)
DATABASE_PATH=/app/database/vtrack.db

# ============================================================================
# FLASK CONFIGURATION
# ============================================================================
# Secret key for session encryption (generate with: python -c "import secrets; print(secrets.token_urlsafe(32))")
SECRET_KEY=CHANGE_ME_TO_RANDOM_SECRET_KEY_IN_PRODUCTION

# Flask environment (production recommended for Docker)
FLASK_ENV=production
FLASK_DEBUG=false

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# Frontend URL for CORS (adjust if using different port or domain)
FRONTEND_URL=http://localhost:3000

# ============================================================================
# GOOGLE OAUTH CREDENTIALS (if using Google Drive sync)
# ============================================================================
# GOOGLE_CLIENT_ID=your_google_client_id
# GOOGLE_CLIENT_SECRET=your_google_client_secret
# GOOGLE_REDIRECT_URI=http://localhost:8080/oauth2callback

# ============================================================================
# CLOUD PAYMENT INTEGRATION (Optional)
# ============================================================================
# CLOUD_PAYMENT_URL=https://asia-southeast1-v-track-payments.cloudfunctions.net/create-payment
# CLOUD_WEBHOOK_URL=https://asia-southeast1-v-track-payments.cloudfunctions.net/webhook-handler
# CLOUD_LICENSE_URL=https://asia-southeast1-v-track-payments.cloudfunctions.net/license-service

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log directory (mounted volume recommended)
LOG_DIR=/app/logs

# ============================================================================
# PROCESSING CONFIGURATION
# ============================================================================
# Maximum concurrent video processing jobs
MAX_PROCESSING_JOBS=2

# Video buffer time (seconds)
VIDEO_BUFFER=5

# Maximum packing time (seconds)
MAX_PACKING_TIME=120

# ============================================================================
# TIMEZONE CONFIGURATION
# ============================================================================
# System timezone (e.g., Asia/Ho_Chi_Minh, America/New_York)
TZ=UTC

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================
# Number of worker threads for Flask
FLASK_WORKERS=4

# Timeout for database connections (seconds)
DB_TIMEOUT=30

# ============================================================================
# SECURITY SETTINGS
# ============================================================================
# Enable HTTPS redirect (set to true if behind HTTPS proxy)
FORCE_HTTPS=false

# Session cookie settings
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax

# ============================================================================
# NOTES FOR DOCKER DEPLOYMENT
# ============================================================================
# 1. Mount volumes for persistent data:
#    docker run -v ./database:/app/database -v ./logs:/app/logs ...
#
# 2. Set EPACK_IN_DOCKER=true to enable Docker-compatible paths
#
# 3. Flask session directory (/app/var/flask_session) is writable by appuser
#
# 4. For production: Generate strong SECRET_KEY and disable debug mode
#
# 5. Expose port 8080 for backend API access
#
# 6. Frontend should run separately on port 3000 or use nginx proxy
# ============================================================================
